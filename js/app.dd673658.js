(function(t){function e(e){for(var n,o,c=e[0],l=e[1],i=e[2],d=0,h=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&h.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(h.length)h.shift()();return s.push.apply(s,i||[]),r()}function r(){for(var t,e=0;e<s.length;e++){for(var r=s[e],n=!0,c=1;c<r.length;c++){var l=r[c];0!==a[l]&&(n=!1)}n&&(s.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},a={app:0},s=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/v2map/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=e,c=c.slice();for(var i=0;i<c.length;i++)e(c[i]);var u=l;s.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},3531:function(t,e,r){"use strict";r("7f06")},"425c":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Info"),r("Map"),r("InputGroup"),r("List",{attrs:{header:"Route : Points"}},t._l(t.getMarkers,(function(e,n){return r("div",{key:n,style:{background:e.selected?"tomato":"#555"},on:{click:function(r){return t.itemClick(e.latlng)}}},[r("div",{style:{padding:"10px",borderBottom:"2px solid #222"}},[r("div",[t._v("# marker "+t._s(n))]),r("div",{staticClass:"small"},[t._v("lat: "+t._s(e.latlng.lat)+" ")]),r("div",{staticClass:"small"},[t._v("lng: "+t._s(e.latlng.lng)+" ")])])])})),0)],1)},s=[],o=(r("d81d"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{height:"100vh",width:"100vw"}},[t.showMap?r("LMap",{ref:"mapel",staticStyle:{height:"100%"},attrs:{zoom:t.zoom,center:t.mapCenter,options:t.mapOptions},on:{"update:center":t.centerUpdate,"update:zoom":t.zoomUpdate,click:t.mapClicked}},[r("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t.showMarkers?r("div",t._l(t.markers,(function(e,n){return r("LLayerGroup",{key:n},[r("LMarker",{attrs:{latLng:e.latlng,icon:e.selected?t.selectedIcon:t.icon,draggable:t.moveMarker},on:{click:function(e){return t.markerClick(n)},dragend:function(e){return t.updateMarker(e,n)}}})],1)})),1):t._e(),t.drawPath?r("div",[r("LLayerGroup",[r("LPolyline",{attrs:{latLngs:t.markers.map((function(t){return t.latlng})),weight:6}})],1)],1):t._e(),t.drawPath?r("div",[r("LLayerGroup",[r("LPolyline",{attrs:{latLngs:t.customPath.filter((function(e){return t.markers[e]&&t.markers[e].latlng})).map((function(e){return t.markers[e].latlng})),weight:3,color:"red"}})],1)],1):t._e()],1):t._e()],1)}),c=[],l=r("2909"),i=(r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("a434"),r("99af"),r("e11e")),u=r("635f"),d=r("2699"),h=r("a40a"),f=r("4e2b"),p=r("1ebb"),m=r("2f62");n["a"].use(m["a"]);var g=new m["a"].Store({state:{map:{center:Object(i["latLng"])(62.601017,29.763573),zoom:12},showPoints:!0,drawPath:!0,selectPath:!1,addMarker:!1,moveMarker:!1,test:0,markers:[{latlng:Object(i["latLng"])(62.601017,29.763573),selected:!1},{latlng:Object(i["latLng"])(62.605017,29.763573),selected:!1},{latlng:Object(i["latLng"])(62.604017,29.774273),selected:!1}],customPath:[]},mutations:{test:function(){console.log(g)},setCenter:function(t,e){t.map.center=e}},getters:{moveMarker:function(t){return t.moveMarker}}}),k=g,v=(r("6cc5"),new Set);window.addEventListener("keydown",(function(t){v.add(t.key)})),window.addEventListener("keyup",(function(t){v.delete(t.key)}));var b={components:{LPolyline:u["a"],LMap:d["a"],LTileLayer:h["a"],LMarker:f["a"],LLayerGroup:p["a"]},mounted:function(){this.markers=k.state.markers},data:function(){return{zoom:13,center:Object(i["latLng"])(62.601017,29.763573),url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',currentZoom:13,currentCenter:Object(i["latLng"])(62.601017,29.763573),showParagraph:!1,mapOptions:{zoomSnap:.5},customPath:[],markers:[],selectedIndex:null,selectedIcon:Object(i["icon"])({iconUrl:"https://cdn0.iconfinder.com/data/icons/small-n-flat/24/678111-map-marker-512.png",iconSize:[64,74],iconAnchor:[32,74]}),icon:Object(i["icon"])({iconUrl:"https://cdn0.iconfinder.com/data/icons/small-n-flat/24/678111-map-marker-512.png",iconSize:[32,37],iconAnchor:[16,37]}),showMap:!0}},computed:{showMarkers:function(){return k.state.showPoints},drawPath:function(){return k.state.drawPath},selectPath:function(){return k.state.selectPath},addMarker:function(){return k.state.addMarker},moveMarker:function(){return k.state.moveMarker},mapCenter:function(){return k.state.map.center}},methods:{zoomUpdate:function(t){this.zoom=t},centerUpdate:function(t){this.currentCenter=t,this.center=t,k.commit("setCenter",t)},showLongText:function(){this.showParagraph=!this.showParagraph},gorandom:function(){this.centerUpdate(Object(i["latLng"])(47.41322,-1.219482))},mapClicked:function(t){if(console.log(this.selectedIndex),this.addMarker){if(null!==this.selectedIndex){console.log("put here ",this.selectedIndex);var e=this.markers,r=e.splice(this.selectedIndex+1),n=[].concat(Object(l["a"])(e),[{latlng:t.latlng,selected:!1}],Object(l["a"])(r));return this.markers=n,this.markers[this.selectedIndex].selected=!1,this.selectedIndex=null,void(k.state.markers=this.markers)}this.markers=[].concat(Object(l["a"])(this.markers),[{latlng:t.latlng,selected:!1}]),k.state.markers=this.markers}},updateMarker:function(t,e){var r=this.markers;r[e].latlng=t.target._latlng,this.markers=r,k.state.markers=this.markers},markerClick:function(t){var e=this.markers;if(this.selectPath&&(this.customPath=[].concat(Object(l["a"])(this.customPath),[t]),k.state.customPath=this.customPath),v.has("Shift")){if(null!==this.selectedIndex){var r=this.markers,n=this.markers[t];r[this.selectedIndex].selected=!1,r[t]=r[this.selectedIndex],r[this.selectedIndex]=n,this.markers=r,this.selectedIndex=null}}else{if(v.has("Control")){var a=this.markers;return a.splice(t,1),void(this.markers=a)}if(null!==this.selectedIndex&&(e[this.selectedIndex].selected=!1),this.selectedIndex===t)return e[this.selectedIndex].selected=!1,this.markers=e,void(this.selectedIndex=null);e[t].selected=!0,this.selectedIndex=t,this.markers=e}}}},_=b,O=r("2877"),L=Object(O["a"])(_,o,c,!1,null,null,null),w=L.exports,M=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"info-panel"},[t._v(" lat: "+t._s(t.mapCenter.lat)+" "),r("br"),t._v(" lng: "+t._s(t.mapCenter.lng)+" ")])},y=[],P={data:function(){return{}},computed:{mapCenter:{get:function(){return k.state.map.center}}}},x=P,C=(r("e385"),Object(O["a"])(x,M,y,!1,null,"c314db64",null)),j=C.exports,I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("LMarker")},S=[],E={components:{LMarker:f["a"]},beforeMount:function(){console.log("marker mounted")}},Y=E,R=Object(O["a"])(Y,I,S,!1,null,null,null),z=(R.exports,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("button",{style:{background:t.showMarkers?t.ALLOW_COLOR:t.DENY_COLOR},on:{click:t.toggleMarkers}},[t._v(" show markers: "),r("b",[t._v(t._s(t.showMarkers))])]),r("button",{style:{background:t.showPath?t.ALLOW_COLOR:t.DENY_COLOR},on:{click:t.togglePath}},[t._v(" show markers: "),r("b",[t._v(t._s(t.showPath))])]),r("button",{style:{background:t.selectPath?t.ALLOW_COLOR:t.DENY_COLOR},on:{click:t.toggleSelectPath}},[t._v(" select path: "),r("b",[t._v(t._s(t.selectPath))])]),r("button",{style:{background:t.addMarker?t.ALLOW_COLOR:t.DENY_COLOR},on:{click:t.toggleAddMarker}},[t._v(" add marker: "),r("b",[t._v(t._s(t.addMarker))])]),r("button",{style:{background:t.moveMarker?t.ALLOW_COLOR:t.DENY_COLOR},on:{click:t.toggleMoveMarker}},[t._v(" move marker: "),r("b",[t._v(t._s(t.moveMarker))])])])}),A=[],X={components:{},data:function(){return{ALLOW_COLOR:"#4CD261",DENY_COLOR:"#F73830"}},computed:{showMarkers:{get:function(){return k.state.showPoints}},showPath:{get:function(){return k.state.drawPath}},selectPath:{get:function(){return k.state.selectPath}},addMarker:{get:function(){return k.state.addMarker}},moveMarker:{get:function(){return k.state.moveMarker}}},methods:{testClick:function(){console.log("toggle test")},toggleMarkers:function(){k.state.showPoints=!k.state.showPoints},togglePath:function(){k.state.drawPath=!k.state.drawPath},toggleSelectPath:function(){k.state.selectPath=!k.state.selectPath},toggleAddMarker:function(){k.state.addMarker=!k.state.addMarker},toggleMoveMarker:function(){k.state.moveMarker=!k.state.moveMarker}}},D=X,U=(r("a1aa"),Object(O["a"])(D,z,A,!1,null,"5303df8a",null)),G=U.exports,N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container",style:{left:t.x+"px",top:t.y+"px"},attrs:{draggable:"true"},on:{dragend:t.updateXY,dragstart:t.calcStart}},[r("h4",[t._v(t._s(t.header))]),t.show?r("div",{style:{maxHeight:"300px",overflow:"auto"}},[t._t("default")],2):t._e(),r("div",[r("button",{on:{click:t.toggle}},[r("span",[t._v(t._s(t.show?"close":"open"))])])])])},W=[],$={props:{header:{type:String,default:"header"}},data:function(){return{startX:0,startY:0,x:100,y:100,show:!0}},methods:{toggle:function(){this.show=!this.show},calcStart:function(t){this.startX=t.clientX-this.x,this.startY=t.clientY-this.y,console.log("start : ",this.startX,this.startY)},updateXY:function(t){this.x=t.clientX-this.startX,this.y=t.clientY-this.startY}}},T=$,J=(r("3531"),Object(O["a"])(T,N,W,!1,null,"533f23fe",null)),B=J.exports,F={components:{List:B,Map:w,Info:j,InputGroup:G},computed:{getMarkers:function(){return console.log(k.state.markers),k.state.markers}},methods:{itemClick:function(t){console.log(t.lat),k.state.map.center=t}}},H=F,Z=(r("034f"),Object(O["a"])(H,a,s,!1,null,null,null)),q=Z.exports;n["a"].config.productionTip=!1,new n["a"]({el:"#app",store:k,render:function(t){return t(q)}})},"7f06":function(t,e,r){},"85ec":function(t,e,r){},"894c":function(t,e,r){},a1aa:function(t,e,r){"use strict";r("425c")},e385:function(t,e,r){"use strict";r("894c")}});
//# sourceMappingURL=app.dd673658.js.map